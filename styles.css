/* =========================
   PlanFlow — styles.css
   Мобильный первый экран, вдохновлён рефами 2/3 + нижняя панель из 4-го.
   Акцент на аккуратные капсулы дат, таймлайн и FAB в центре.
   ========================= */

:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --ink:#101217;
  --muted:#80839a;
  --muted-2:#a9adc4;
  --line:#e6e8f0;
  --brand:#6d4aff;        /* фиолетовый акцент */
  --brand-2:#40cfff;      /* голубой акцент для чекпоинтов */
  --danger:#ff4d6d;
  --success:#2ec27e;

  --r:16px;               /* базовый радиус */
  --shadow:0 6px 16px rgba(17,19,26,0.08), 0 2px 6px rgba(17,19,26,0.06);
  --shadow-soft:0 3px 10px rgba(17,19,26,0.06);

  --safe-b: env(safe-area-inset-bottom, 0px);
  --safe-t: env(safe-area-inset-top, 0px);

  --font-ui: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
  --font-impact: Impact, Haettenschweiler, "Arial Narrow Bold", sans-serif;
}

/* Reset lite */
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font:14px/1.4 var(--font-ui);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.app{
  min-height:100dvh;
  padding-bottom:84px; /* место под нижнюю панель */
}

/* ----------------- Topbar ----------------- */
.topbar{
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:center;
  gap:14px;
  padding: calc(10px + var(--safe-t)) 16px 10px;
  background:linear-gradient(180deg, rgba(246,247,251,1) 70%, rgba(246,247,251,0.6) 100%);
  backdrop-filter:saturate(140%) blur(6px);
  border-bottom:1px solid rgba(0,0,0,0.02);
}
.icon-btn{
  appearance:none; border:0; background:#fff; color:var(--ink);
  width:36px; height:36px; border-radius:12px; display:grid; place-items:center;
  box-shadow:var(--shadow-soft);
}
.icon-btn:active{transform:scale(.98)}
.month-title{ text-align:center; min-width:180px }
.month{
  font-family: var(--font-impact);
  letter-spacing:.2px;
  font-size:22px; line-height:1;
}
.year{
  font-size:12px; color:var(--muted); margin-top:2px;
  text-transform:uppercase; letter-spacing:.8px;
}

/* ----------------- Calendar strip ----------------- */
.calendar-strip{ padding: 10px 0 2px }
.dates{
  display:flex; gap:14px; padding: 0 16px 8px;
  overflow-x:auto; overscroll-behavior-x:contain;
  scrollbar-width:none;
}
.dates::-webkit-scrollbar{ display:none }

.date{
  flex:0 0 86px;
  background:#fff; border-radius:24px;
  box-shadow:var(--shadow-soft);
  padding:10px 10px 12px;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  border:1px solid rgba(0,0,0,0.04);
  transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
}
.date .dow{
  font-size:11px; color:var(--muted-2); text-transform:uppercase; letter-spacing:.8px;
}
.date .day{
  font-family: var(--font-impact);
  font-size:34px; line-height:1; margin:2px 0 4px;
}
.date .mon{
  font-size:12px; color:var(--muted-2);
}
.date.is-today{
  outline:2px dashed rgba(64,207,255,.4);
  outline-offset:-6px;
}
.date.is-selected{
  background:linear-gradient(180deg, var(--brand) 0%, #8c6bff 100%);
  color:#fff;
  transform:translateY(-2px);
  box-shadow:0 10px 22px rgba(109,74,255,.28);
}
.date.is-selected .dow,
.date.is-selected .mon{ color:rgba(255,255,255,.95) }

/* ----------------- Content ----------------- */
.content{ padding: 4px 16px 16px }
.section-title{
  margin:6px 2px 10px;
  font-weight:700; letter-spacing:.2px;
}
.empty{
  margin:16px 4px; color:var(--muted);
}

/* ----------------- Timeline view ----------------- */
.timeline-view{
  position:relative;
  padding-left:56px; /* место под ось времени */
  padding-right:8px;
}
.timeline-view::before{
  content:"";
  position:absolute; left:28px; top:0; bottom:0;
  width:2px; background:linear-gradient(180deg,#cfd3e6 0%, #e9ecf8 40%, #cfd3e6 100%);
  border-radius:2px;
}
.time-label{
  position:relative; left:-56px; width:48px;
  color:var(--muted-2); font-weight:600; letter-spacing:.6px;
  display:flex; justify-content:flex-end; padding-right:8px;
}

.now-line{
  position:sticky; top:80px; z-index:5;
  margin-left:-56px; padding-left:56px;
  display:flex; align-items:center; gap:8px;
}
.now-line .dot{
  width:10px; height:10px; border-radius:50%;
  background:var(--danger); box-shadow:0 0 0 6px rgba(255,77,109,.15);
}
.now-line .rule{
  height:2px; flex:1; background:linear-gradient(90deg, rgba(255,77,109,1), rgba(255,77,109,.15));
}

.event{
  position:relative;
  margin:14px 0;
  display:flex; gap:10px; align-items:flex-start;
}
.event .pin{
  flex:0 0 20px; height:44px; border-radius:10px;
  background:var(--brand-2);
  box-shadow:0 6px 14px rgba(64,207,255,.25);
  position:relative;
}
.event .card{
  background:var(--card); border-radius:18px; padding:12px 14px;
  box-shadow:var(--shadow); border:1px solid #eef0f6;
  flex:1;
}
.event .title{ font-weight:700; margin-bottom:4px }
.event .meta{ font-size:12px; color:var(--muted) }
.event .check{
  margin-left:8px;
  width:22px; height:22px; border-radius:6px; border:2px solid var(--brand); background:#fff;
  display:grid; place-items:center; color:var(--brand);
}
.event.is-done .title{ text-decoration:line-through; color:#98a0b8 }
.event.is-done .check{ background:var(--brand); color:#fff }

/* ----------------- Cards view ----------------- */
.cards-view{
  display:grid; gap:10px;
}
.task{
  background:#fff; border-radius:18px; padding:14px 14px;
  box-shadow:var(--shadow-soft); border:1px solid #eef0f6;
  display:flex; align-items:center; gap:10px;
}
.task .bullet{
  width:12px; height:12px; border-radius:50%; background:var(--brand-2);
  box-shadow:0 0 0 6px rgba(64,207,255,.15);
}
.task .info{ flex:1 }
.task .name{ font-weight:700 }
.task .sub{ font-size:12px; color:var(--muted) }

/* ----------------- FAB + Bottom bar ----------------- */
.fab{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom: calc(58px + var(--safe-b));
  width:64px; height:64px; border-radius:22px;
  background:linear-gradient(180deg, #40cfff 0%, #2ab2e0 100%);
  color:#fff; border:0;
  display:grid; place-items:center;
  box-shadow:0 18px 26px rgba(64,207,255,.35), 0 4px 10px rgba(64,207,255,.25);
}
.fab:active{ transform:translateX(-50%) scale(.98) }

.bottombar{
  position:fixed; left:0; right:0; bottom:0; z-index:30;
  padding:12px 10px calc(12px + var(--safe-b));
  background:#fff; border-top:1px solid #eef0f6;
  display:grid; grid-template-columns: 1fr 1fr 64px 1fr 1fr;
  align-items:center; gap:6px;
  box-shadow:0 -6px 18px rgba(17,19,26,.06);
}
.nav-btn{
  appearance:none; border:0; background:transparent; color:#7a7f96;
  display:flex; flex-direction:column; align-items:center; gap:6px;
  font-size:11px; font-weight:600;
}
.nav-btn svg{ opacity:.9 }
.nav-btn.is-active{ color:var(--ink) }
.nav-gap{ width:64px; height:1px }

/* ----------------- Modal (settings / task) ----------------- */
.modal{
  border:0; padding:0; width:min(640px, 92vw);
  border-radius:22px; overflow:hidden;
  box-shadow: 0 24px 60px rgba(16,18,23,.25);
}
.modal::backdrop{
  background:rgba(9,10,14,.45);
  backdrop-filter: blur(4px);
}
.modal-card{ background:#fff; display:flex; flex-direction:column; max-height:85dvh }
.modal-header{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:14px 14px; border-bottom:1px solid #eef0f6;
}
.modal-header h3{ margin:0; font-weight:800; letter-spacing:.2px }
.modal-body{ padding:14px }
.modal-body.grid{ display:grid; gap:12px }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
.field{ display:flex; flex-direction:column; gap:6px }
.field>span{ font-size:12px; color:var(--muted); font-weight:600; }
.field input[type="text"],
.field input[type="time"],
.field textarea{
  width:100%; padding:12px 12px; border-radius:12px;
  border:1px solid #e5e8f2; background:#fbfcff;
  font:inherit; color:var(--ink);
}
.radio, .switch{
  display:flex; gap:10px; align-items:center; padding:8px 0;
}
.modal-footer{
  display:flex; justify-content:flex-end; gap:10px; padding:12px 14px;
  border-top:1px solid #eef0f6;
}
.btn{
  appearance:none; border:1px solid #e5e8f2; background:#fff; color:var(--ink);
  padding:10px 14px; border-radius:12px; font-weight:700;
}
.btn.primary{
  border-color: transparent;
  background:linear-gradient(180deg, var(--brand) 0%, #8c6bff 100%);
  color:#fff;
}

/* Utility */
.hidden{ display:none !important }

/* Desktop polish */
@media (min-width:768px){
  .app{ max-width:840px; margin:0 auto }
  .timeline-view{ padding-left:70px }
  .timeline-view::before{ left:32px }
  .time-label{ left:-70px; width:62px }
  .bottombar{ max-width:840px; left:50%; transform:translateX(-50%) }
}

/* Impact headings preference for user */
.section-title,
.date .day,
.month{ font-family: var(--font-impact) }
