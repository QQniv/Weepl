/* =========================================================
   WEEPL v4 — styles.css
   - Soft glass aesthetic
   - Матрица Эйзенхауэра (A/B/C/D)
   - Фиксированная шапка и адаптивная сетка
   - Привычки, AI-советы
   ========================================================= */

/* ---------- Core variables ---------- */
:root{
  --ink:#0c1a2a;
  --text:#32475c;
  --panel:#ffffff;
  --blue:#2b8cff;
  --page-x:8vw;
  --wrap:1080px;
  --radius:22px;
  --shadow-small:0 4px 14px rgba(0,0,0,.08);
  --shadow-big:0 25px 80px rgba(0,0,0,.12);
  --accent:#3b82f6;

  /* Цвета приоритетов */
  --prioA:#ff5d5d;
  --prioB:#ffc350;
  --prioC:#78cdff;
  --prioD:#9aa2b0;

  --tintA:rgba(255, 93, 93, .16);
  --tintB:rgba(255,195, 80,.14);
  --tintC:rgba(120,205,255,.14);
  --tintD:rgba(150,160,180,.12);
}

[data-theme="dark"]{
  --ink:#e8edf3;
  --text:#d2d6db;
  --panel:#0e141b;
  --shadow-small:0 3px 12px rgba(0,0,0,.5);
  --shadow-big:0 20px 70px rgba(0,0,0,.7);
  --tintA:rgba(255, 93, 93, .22);
  --tintB:rgba(255,195, 80,.22);
  --tintC:rgba(120,205,255,.20);
  --tintD:rgba(150,160,180,.18);
}

/* ---------- Reset ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%; width:100%;
  font-family:'Inter', system-ui, sans-serif;
  color:var(--ink);
  background:linear-gradient(180deg,#f7f9fc 0%,#e9eef5 100%);
  -webkit-tap-highlight-color:transparent;
  scroll-behavior:smooth;
}

/* ---------- Backgrounds ---------- */
.bg{
  position:fixed; inset:0;
  background:radial-gradient(130% 100% at 50% 0%,#f2f6ff 0%,#e8effa 100%);
  z-index:-2;
}
.bg-veil{
  position:fixed; inset:0;
  background:radial-gradient(180% 120% at 60% 30%,rgba(200,230,255,.25),transparent 80%);
  z-index:-1;
}
.noise{
  position:fixed; inset:0;
  background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2O4dO6cHgAGlQJx4YPv6wAAAABJRU5ErkJggg==');
  opacity:.05; mix-blend-mode:overlay;
  z-index:-1;
}

/* ---------- Layout ---------- */
.wrap{
  max-width:var(--wrap);
  margin:0 auto;
  padding:0 var(--page-x);
}
main{padding-bottom:120px;}

/* ---------- Header ---------- */
header .title h1{
  font-size:34px; font-weight:700;
  margin-bottom:2px; color:var(--ink);
}
header .title .date{
  font-size:16px; font-weight:500;
  color:var(--text);
  opacity:.75;
}
.icon-btn{
  width:38px; height:38px;
  border:none; border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  background:rgba(255,255,255,.65);
  box-shadow:0 3px 8px rgba(0,0,0,.08);
  backdrop-filter:blur(10px);
  cursor:pointer;
  transition:background .2s ease;
}
.icon-btn svg{stroke:var(--ink);}
.icon-btn:hover{background:rgba(255,255,255,.85);}

/* ---------- Grid ---------- */
.grid{
  margin-top:26px;
  display:block;
}
.grid-inner{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:18px;
}
.card{
  background:var(--panel);
  border-radius:var(--radius);
  box-shadow:var(--shadow-small);
  padding:20px 18px 16px;
  display:flex; flex-direction:column; justify-content:space-between;
  cursor:pointer;
  transition:transform .2s ease, box-shadow .2s ease;
  will-change:transform;
}
.card:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,0,0,.1);}
.card h3{
  font-size:18px; font-weight:700; line-height:1.25; margin-bottom:6px;
}
.card p{
  font-size:14.5px; line-height:1.4;
  color:var(--text); opacity:.85;
}
.meta{
  display:flex; justify-content:space-between; align-items:center;
  font-size:13px; margin-top:10px;
  color:var(--text); opacity:.8;
}
.meta span:first-child{font-weight:600;}

/* ---------- AI Tip ---------- */
.ai{
  margin-top:calc(var(--header-h) + 12px);
  margin-bottom:24px;
}
.ai-tip{
  background:linear-gradient(135deg,rgba(196,211,255,.8),rgba(182,240,255,.85));
  border-radius:18px;
  box-shadow:0 6px 20px rgba(0,0,0,.08);
  padding:14px 16px;
  display:flex; align-items:center; gap:10px;
  font-size:15px; font-weight:600;
  color:#0a1020;
  backdrop-filter:blur(8px);
  cursor:pointer;
  transition:opacity .2s ease, transform .25s ease;
}
.ai-tip:hover{opacity:.95; transform:translateY(-2px);}
.ai-dot{
  width:8px; height:8px;
  background:#fff; border-radius:50%; box-shadow:0 0 6px rgba(255,255,255,.6);
  flex-shrink:0;
}
.ai-refresh svg{width:16px;height:16px;stroke:#0a1020;}

/* ---------- Habits ---------- */
.habits{margin-top:36px;}
.habits-head{
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:10px;
}
.habits-row{
  display:flex; flex-wrap:wrap; gap:10px;
}
.habit{
  padding:8px 14px;
  border:none;
  border-radius:20px;
  font-weight:600;
  font-size:14px;
  background:rgba(255,255,255,.6);
  box-shadow:0 2px 6px rgba(0,0,0,.05);
  cursor:pointer;
  transition:background .2s ease, transform .2s ease;
}
.habit[aria-pressed="true"]{
  background:linear-gradient(135deg,#c7ebff,#9ee4ff);
  color:#0a101a;
  transform:translateY(-1px);
}
.habit:hover{background:rgba(255,255,255,.85);}

/* ---------- Dock ---------- */
nav{
  position:fixed; bottom:0; left:0; right:0; z-index:25;
  background:rgba(255,255,255,.78);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  box-shadow:0 -8px 30px rgba(0,0,0,.08);
  border-top:1px solid rgba(0,0,0,.04);
}
.dock{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  max-width:var(--wrap);
  margin:0 auto; padding:10px var(--page-x);
}
.dock button{
  background:none; border:none; text-align:center; cursor:pointer;
  display:flex; flex-direction:column; align-items:center; gap:3px;
  font-size:12.5px; font-weight:600;
  color:var(--text); opacity:.7;
  transition:opacity .15s ease;
}
.dock button.active{opacity:1; color:var(--accent);}
.dock svg{width:20px;height:20px;stroke:currentColor;}

/* ---------- Floating Add Button ---------- */
#quickAddBtn{
  position:fixed; right:calc(18px + env(safe-area-inset-right)); bottom:calc(90px + env(safe-area-inset-bottom));
  width:64px; height:64px;
  border-radius:20px;
  background:radial-gradient(circle at 30% 30%,#fff 0%,#dbe9ff 100%);
  color:#111;
  font-size:34px; font-weight:700;
  box-shadow:0 14px 40px rgba(0,0,0,.18);
  border:none; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:transform .25s ease, box-shadow .25s ease;
  z-index:40;
}
#quickAddBtn:hover{
  transform:translateY(-4px);
  box-shadow:0 16px 46px rgba(0,0,0,.22);
}

/* ---------- Priority color backgrounds ---------- */
[data-prio="A"]{background:linear-gradient(var(--tintA),var(--tintA)),var(--panel);}
[data-prio="B"]{background:linear-gradient(var(--tintB),var(--tintB)),var(--panel);}
[data-prio="C"]{background:linear-gradient(var(--tintC),var(--tintC)),var(--panel);}
[data-prio="D"]{background:linear-gradient(var(--tintD),var(--tintD)),var(--panel);}

/* ---------- Animations ---------- */
@keyframes fadeIn{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:none;}
}
.card.inview{animation:fadeIn .5s ease both;}
.ai-tip.inview{animation:fadeIn .6s ease both;}
.habit.inview{animation:fadeIn .6s ease both;}

/* ---------- Accessibility ---------- */
.sr-only{
  position:absolute!important;
  width:1px!important; height:1px!important;
  margin:-1px!important; overflow:hidden!important;
  clip:rect(0 0 0 0)!important; border:0!important;
}

/* ---------- Responsive ---------- */
@media(max-width:700px){
  :root{--page-x:5vw;}
  header .title h1{font-size:28px;}
  .grid-inner{gap:14px;}
  .card{padding:16px 14px;}
  .habit{font-size:13.5px; padding:7px 12px;}
}
