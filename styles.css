
:root{
  --mode: dark;                 /* dark | light */
  --accent:#B7FF2A;             /* неон по умолчанию */
  /* LIGHT */
  --bg-light:#F7F8FA; --surface-light:#FFFFFF; --surface-2-light:#F1F3F6;
  --text-light:#0D0F10; --muted-light:#6B7080; --line-light:#E6EAF0;
  /* DARK */
  --bg-dark:#0D0F10; --surface-dark:#131517; --surface-2-dark:#191C1F;
  --text-dark:#F5F7FA; --muted-dark:#9AA4B2; --line-dark:#23272D;
  --r-xl:24px; --r-lg:16px; --r-md:12px; --r-sm:8px;
  --shadow:0 14px 32px rgba(0,0,0,.35);
  --anim-ui:.25s cubic-bezier(.2,.8,.2,1);
}
:root[data-mode="dark"]{
  --bg:var(--bg-dark); --surface:var(--surface-dark); --surface-2:var(--surface-2-dark);
  --text:var(--text-dark); --muted:var(--muted-dark); --line:var(--line-dark);
}
:root[data-mode="light"]{
  --bg:var(--bg-light); --surface:var(--surface-light); --surface-2:var(--surface-2-light);
  --text:var(--text-light); --muted:var(--muted-light); --line:var(--line-light);
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);
  font:14px/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",sans-serif}

body, .app, .panel, .day, .tab, .icon, .sheet, .set-card, .set-row,
.input, select, .smart-wrap, .nav, .fab {
  transition: background-color var(--anim-ui), color var(--anim-ui), border-color var(--anim-ui);
}

.app{max-width:520px;margin:0 auto;min-height:100dvh;display:flex;flex-direction:column}

/* APP BAR */
.appbar{height:64px;display:flex;align-items:center;justify-content:space-between;padding:0 16px}
.icon{width:36px;height:36px;border-radius:12px;background:var(--surface-2);display:grid;place-items:center;border:1px solid var(--line)}
.title{font-weight:800}

/* TABS / SCREENS */
.screen{display:none}
.screen.active{display:block}

/* MONTH + DAY STRIP */
.section{padding:0 16px}
.month{display:flex;align-items:center;justify-content:center;gap:10px;margin:4px 0 10px}
.month button{border:none;background:transparent;color:var(--muted);font-size:18px}
.days{display:flex;gap:12px;overflow:auto;padding:2px 2px 10px;scroll-snap-type:x mandatory}
.day{min-width:90px;background:var(--surface);border-radius:24px;padding:10px 12px;text-align:center;scroll-snap-align:start;position:relative;border:1px solid var(--line)}
.day .dow{font-size:12px;color:var(--muted);margin-bottom:4px}
.day .date{font-size:28px;font-weight:800}
.day .mon{font-size:12px;color:var(--muted)}
.day .badge{position:absolute;right:8px;top:-9px;background:var(--accent);color:#111;padding:3px 10px;border-radius:999px;font-size:11px;border:1px solid #1112}
.day.today{outline:2px solid var(--accent);outline-offset:2px}
.day.selected{box-shadow:0 0 0 2px var(--accent) inset}

/* TASK LIST */
.panel{background:var(--surface);border-radius:24px 24px 0 0;margin-top:12px;padding:6px 0 112px;border-top:1px solid var(--line)}
.item{display:grid;grid-template-columns:10px 1fr auto;gap:12px;padding:16px;border-bottom:1px solid var(--line)}
.bar{border-radius:999px}
.titleRow{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.title{font-weight:700}
.meta{font-size:12px;color:var(--muted);margin-top:3px}
.badge-chip{font-size:11px;border:1px solid var(--line);border-radius:999px;padding:3px 8px;background:var(--surface-2)}
.item.done{opacity:.35}
.actions{display:flex;gap:8px}
.act{width:32px;height:32px;border-radius:12px;display:grid;place-items:center;border:1px solid var(--line);background:var(--surface-2)}

/* BOTTOM NAV */
.nav{position:fixed;left:50%;bottom:16px;transform:translateX(-50%);display:flex;gap:10px;background:var(--surface);border:1px solid var(--line);border-radius:999px;padding:8px 12px;box-shadow:var(--shadow)}
.tab{width:44px;height:44px;border-radius:12px;border:1px solid var(--line);background:var(--surface-2);display:grid;place-items:center}
.tab.active{background:var(--accent);color:#111;border-color:transparent}

/* FAB */
.fab{position:fixed;left:50%;bottom:92px;transform:translateX(-50%);width:68px;height:68px;border-radius:20px;border:none;background:var(--accent);color:#111;font-size:38px;display:grid;place-items:center;box-shadow:0 16px 36px rgba(0,0,0,.4)}
@keyframes fab-bounce { 0%{transform:translateX(-50%) scale(1)} 40%{transform:translateX(-50%) scale(.94)} 100%{transform:translateX(-50%) scale(1)} }
.fab.bounce{ animation:fab-bounce .18s; }

/* SHEET (Add/Edit) */
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);opacity:0;pointer-events:none;transition:.25s opacity}
.sheet{position:fixed;left:0;right:0;bottom:-100%;max-width:520px;margin:0 auto;background:var(--surface);border-top-left-radius:26px;border-top-right-radius:26px;border:1px solid var(--line);box-shadow:0 -24px 48px rgba(0,0,0,.5);transform:translateY(100%);transition:.38s transform cubic-bezier(.18,.88,.22,1.05)}
.backdrop.open{opacity:1;pointer-events:auto}
.sheet.open{transform:translateY(0)}
.handle{width:64px;height:6px;border-radius:999px;background:var(--line);margin:10px auto 6px}
.body{padding:14px 16px 18px}
.field{margin:12px 0}
.label{font-size:12px;color:var(--muted);margin-bottom:6px}
.input, select{width:100%;padding:12px;border:1px solid var(--line);border-radius:14px;background:var(--surface-2);color:var(--text)}
.row{display:flex;gap:10px}
.seg{display:flex;border:1px solid var(--line);border-radius:14px;overflow:hidden}
.seg button{flex:1;padding:11px;border:none;background:var(--surface-2);color:var(--text)}
.seg button[aria-pressed="true"]{background:var(--accent);color:#111}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{padding:9px 11px;border-radius:999px;border:1px solid var(--line);background:var(--surface-2);font-size:13px}
.chip[aria-pressed="true"]{background:#111;color:#fff;border-color:#111}
.footer{display:flex;gap:10px;margin-top:12px}
.btn{flex:1;padding:12px;border-radius:14px;border:1px solid var(--line);background:var(--surface-2);color:var(--text)}
.btn.primary{background:var(--accent);color:#111;border-color:transparent}

/* SMART */
.smart-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border:1px solid var(--line);border-radius:14px;background:var(--surface-2);cursor:pointer}
.smart-wrap{margin-top:8px;border:1px solid var(--line);border-radius:14px;padding:10px 12px;background:var(--surface-2);display:none}
.smart-wrap.open{display:block}
.smart-grid{display:grid;gap:10px}
.hint{font-size:11px;color:var(--muted);margin-top:6px}

/* SETTINGS */
.settings{padding:0 16px 120px}
.set-card{background:var(--surface);border:1px solid var(--line);border-radius:20px;padding:14px;margin:10px 0}
.set-h{font-weight:800;margin-bottom:8px}
.set-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--line)}
.set-row:last-child{border-bottom:none}
.switcher{display:flex;border:1px solid var(--line);border-radius:14px;overflow:hidden}
.switcher button{padding:8px 12px;border:none;background:var(--surface-2);color:var(--text)}
.switcher button[aria-pressed="true"]{background:var(--accent);color:#111}
.swatch-grid{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
.swatch{width:36px;height:36px;border-radius:12px;border:2px solid #fff;box-shadow:var(--shadow);cursor:pointer}
.kbd{display:inline-block;padding:2px 8px;border:1px solid var(--line);border-radius:10px;background:var(--surface-2);font-size:12px}

/* CONFETTI CANVAS */
#confettiCanvas{position:fixed;inset:0;pointer-events:none;z-index:9997}

/* ONBOARDING */
.ob-wrap{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;z-index:9999}
.ob-card{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
  width:min(520px,92vw);background:var(--surface);color:var(--text);
  border:1px solid var(--line);border-radius:24px;box-shadow:0 24px 64px rgba(0,0,0,.45);
  padding:20px}
.ob-h{font-weight:800;font-size:20px;margin:4px 0 8px}
.ob-p{color:var(--muted);margin:6px 0}
.ob-btm{display:flex;justify-content:space-between;gap:10px;margin-top:14px}
.ob-btn{flex:1;padding:12px;border-radius:14px;border:1px solid var(--line);background:var(--surface-2);color:var(--text)}
.ob-btn.primary{background:var(--accent);color:#111;border-color:transparent}
.ob-dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
.ob-dot{width:8px;height:8px;border-radius:999px;background:var(--line)}
.ob-dot.active{background:var(--accent)}

/* FOCUS TIMER */
.ft-wrap{position:fixed;inset:0;display:none;background:rgba(0,0,0,.6);z-index:9998}
.ft-card{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
  width:min(520px,92vw);height:56vh;background:var(--surface);border:1px solid var(--line);
  border-radius:24px;box-shadow:0 24px 64px rgba(0,0,0,.45);display:flex;flex-direction:column}
.ft-top{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
.ft-ttl{font-weight:800}
.ft-canvas{flex:1;border-top:1px solid var(--line);border-bottom:1px solid var(--line);display:grid;place-items:center}
.ft-btm{padding:12px 16px;display:flex;gap:10px}
.ft-btn{flex:1;padding:12px;border-radius:14px;border:1px solid var(--line);background:var(--surface-2);color:var(--text)}
.ft-btn.primary{background:var(--accent);color:#111;border-color:transparent}
