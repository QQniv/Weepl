/* =========================
   Planner • Future Flow  v1
   Типографика: Anton + Manrope
   База: белая тема + один акцент
   Радиусы крупные, blur на поверхностях
   ========================= */

:root{
  /* Цвета нейтраль */
  --bg: #F6F7F9;
  --surface: #FFFFFF;
  --ink: #0E0F12;
  --ink-2: #2A2D33;
  --muted: #8C8F95;
  --border: rgba(15,18,22,.08);

  /* Акцент по умолчанию (заменяется темами ниже) */
  --accent: #6C4CFF;
  --accent-ink: #FFFFFF;

  /* Тени/blur/радиусы */
  --shadow-1: 0 4px 12px rgba(0,0,0,.08);
  --shadow-2: 0 10px 24px rgba(0,0,0,.12);
  --blur: blur(12px);
  --radius-s: 10px;   /* базовый шаг, как просил */
  --radius-m: 16px;
  --radius-l: 20px;
  --radius-xl: 24px;

  /* Типографика */
  --h1: 28px;
  --h2: 22px;
  --body: 16px;
  --caption: 13px;

  /* Прочее */
  --gap: 10px;
  --fast: 180ms;
  --ease: cubic-bezier(.2,.8,.2,1);
}

/* ===== Акцентные темы (один цвет меняется) ===== */
:root[data-accent="rose"]   { --accent:#FF4FA3; }
:root[data-accent="blue"]   { --accent:#147BFF; }   /* яркий металлический синий */
:root[data-accent="violet"] { --accent:#8A2BE2; }
:root[data-accent="mint"]   { --accent:#00C9A7; }
:root[data-accent="lemon"]  { --accent:#FFD43B; --accent-ink:#0E0F12; }
:root[data-accent="coral"]  { --accent:#FF6F61; }
:root[data-accent="azure"]  { --accent:#00B4FF; }
:root[data-accent="orchid"] { --accent:#DA70D6; }
:root[data-accent="sky"]    { --accent:#4FC3F7; }
:root[data-accent="lime"]   { --accent:#A7F300; --accent-ink:#0E0F12; }

/* ===== Тёмная тема ===== */
:root[data-theme="dark"]{
  --bg:#0F1114;
  --surface:#15181DCC;
  --ink:#EDEFF2;
  --ink-2:#C7CBD3;
  --muted:#8F98A3;
  --border: rgba(255,255,255,.08);
  --shadow-1: 0 8px 24px rgba(0,0,0,.45);
  --shadow-2: 0 16px 40px rgba(0,0,0,.6);
}

/* ===== Base ===== */
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: var(--body);
  line-height:1.55;
  color: var(--ink);
  background: radial-gradient(1200px 600px at 70% -10%, rgba(0,0,0,.05), transparent 60%), var(--bg);
}

.h-impact{
  font-family: Anton, Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
  letter-spacing:.2px;
  font-size: var(--h1);
  margin: 0 0 calc(var(--gap)*1.5);
  line-height:1.1;
}

h2.h-impact{ font-size: var(--h2); }

a{ color: inherit; text-decoration:none }
button,select,input,textarea{ font: inherit; color: inherit }
:focus-visible{ outline: 2px solid var(--accent); outline-offset: 2px; border-radius: 8px }

/* ===== App Layout ===== */
.app{ 
  min-height:100%;
  padding-top: 64px; /* высота topbar */
}
.section{
  max-width: 980px;
  margin: 0 auto;
  padding: calc(var(--gap)*2) calc(var(--gap)*1.5) calc(var(--gap)*5);
}

/* ===== Topbar / Tabs ===== */
.topbar{
  position: fixed; top:0; left:0; right:0; height:64px;
  display:flex; align-items:center; justify-content:center;
  z-index: 20;
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
}
.tabs{
  display: inline-flex;
  gap: var(--gap);
  background: color-mix(in oklab, var(--surface) 86%, transparent);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-1);
  padding: 6px;
  border-radius: calc(var(--radius-xl) + 6px);
}
.tab{
  display:flex; align-items:center; gap:8px;
  padding:10px 14px;
  border-radius: var(--radius-l);
  color: var(--ink-2);
  transition: background var(--fast) var(--ease), color var(--fast) var(--ease), transform var(--fast) var(--ease);
}
.tab .icon{ filter: saturate(.9); }
.tab:hover{ background: color-mix(in oklab, var(--accent) 12%, var(--surface)); }
.tab.active{
  background: var(--accent);
  color: var(--accent-ink);
  box-shadow: 0 6px 18px color-mix(in oklab, var(--accent) 28%, transparent);
  transform: translateY(-1px);
}

/* ===== Buttons ===== */
.btn, .btn-outline{
  display:inline-flex; align-items:center; justify-content:center;
  height: 42px; padding: 0 16px;
  border-radius: var(--radius-m);
  cursor:pointer; user-select:none;
  transition: transform var(--fast) var(--ease), box-shadow var(--fast) var(--ease), background var(--fast) var(--ease);
}
.btn{
  background: var(--accent); color: var(--accent-ink); border:1px solid color-mix(in oklab, var(--accent) 80%, transparent);
  box-shadow: 0 8px 20px color-mix(in oklab, var(--accent) 26%, transparent);
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }

.btn-outline{
  background: color-mix(in oklab, var(--surface) 88%, transparent);
  border:1px solid var(--border);
  color: var(--ink-2);
}
.btn-outline:hover{ background: color-mix(in oklab, var(--accent) 10%, var(--surface)); }

/* Icon-only */
.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius: 999px;
  background: color-mix(in oklab, var(--surface) 82%, transparent);
  border:1px solid var(--border);
  cursor:pointer; transition: background var(--fast) var(--ease), transform var(--fast) var(--ease);
}
.icon-btn:hover{ background: color-mix(in oklab, var(--accent) 10%, var(--surface)); transform: translateY(-1px); }

/* ===== FAB ===== */
.fab{
  position: fixed; right: 24px; bottom: 24px; z-index: 25;
  width:64px; height:64px; border-radius: 999px; border: none;
  background: var(--accent); color: var(--accent-ink);
  font-size: 32px; line-height:0;
  box-shadow: 0 16px 36px color-mix(in oklab, var(--accent) 35%, transparent);
  cursor: pointer;
  transition: transform var(--fast) var(--ease), box-shadow var(--fast) var(--ease);
}
.fab:hover{ transform: translateY(-2px) scale(1.02); }

/* ===== Cards / Surfaces ===== */
.card, .settings-card, .calendar-tasks{
  background: color-mix(in oklab, var(--surface) 92%, transparent);
  border:1px solid var(--border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-1);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
}

/* ===== Settings ===== */
.settings-card{ padding: 14px; display: grid; gap: 12px; }
.settings-card .row{
  display:flex; align-items:center; justify-content:space-between; gap: 12px;
}
.settings-card select{ height:40px; padding:0 12px; border-radius: var(--radius-s); border:1px solid var(--border); background: var(--surface); }

/* ===== Fields ===== */
.field{ display:grid; gap:6px; margin-bottom: 12px; }
.field > span{ color: var(--muted); font-size: var(--caption); }
input[type="text"], input[type="time"], input[type="date"], textarea, select{
  width:100%; border:1px solid var(--border); background: color-mix(in oklab, var(--surface) 90%, transparent);
  border-radius: var(--radius-m); padding: 10px 12px;
  transition: border-color var(--fast) var(--ease), background var(--fast) var(--ease), box-shadow var(--fast) var(--ease);
}
input:focus, textarea:focus, select:focus{
  border-color: color-mix(in oklab, var(--accent) 60%, var(--border));
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 18%, transparent);
  outline: none;
}
.grid2{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
@media (max-width: 640px){ .grid2{ grid-template-columns: 1fr; } }

/* ===== Modal ===== */
.modal{
  border: none; padding: 0; background: transparent;
}
.modal::backdrop{ background: rgba(0,0,0,.25); backdrop-filter: blur(2px); }
.modal-body{
  width: min(640px, calc(100vw - 24px));
  margin: auto;
  padding: 16px;
  border-radius: calc(var(--radius-xl) + 4px);
  background: color-mix(in oklab, var(--surface) 94%, transparent);
  border:1px solid var(--border);
  box-shadow: var(--shadow-2);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
}
.modal-head, .modal-foot{ display:flex; align-items:center; justify-content:space-between; gap: 10px; }
.modal-head{ margin-bottom: 6px; }
.modal-foot{ margin-top: 8px; }

/* ===== Task List ===== */
.task-list{ display:grid; gap: 12px; }
.task{
  display:grid; grid-template-columns: 40px 1fr auto; align-items:center; gap: 12px;
  padding: 12px;
  border-radius: var(--radius-xl);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--surface) 94%, transparent);
  box-shadow: var(--shadow-1);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
  transition: transform var(--fast) var(--ease), box-shadow var(--fast) var(--ease), background var(--fast) var(--ease);
}
.task:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }
.task .title{ margin: 0; font-weight: 600; }
.task .time{ font-variant-numeric: tabular-nums; opacity:.9; }
.task .tags{ display:flex; gap:6px; margin-top:4px; }
.task .tags span{
  font-size: 12px; padding:4px 8px; border-radius: 999px;
  background: color-mix(in oklab, var(--accent) 8%, var(--surface));
  color: color-mix(in oklab, var(--accent) 60%, var(--ink));
  border:1px solid color-mix(in oklab, var(--accent) 26%, transparent);
}

/* чекбокс */
.task .chk{
  inline-size: 24px; block-size:24px; border-radius: 999px; border:2px solid var(--border); background: transparent;
  cursor: pointer; transition: all var(--fast) var(--ease);
}
.task.is-done{ opacity:.6; }
.task.is-done .title{ text-decoration: line-through; }

/* кнопки действий */
.task .task-ctl{ display:flex; gap:6px; }

/* строка с временем по центру относительно заголовка */
.task .row-1{ display: grid; grid-template-columns: 1fr auto; align-items:center; gap:10px; }

/* ===== Calendar ===== */
.calendar-head{
  display:grid; grid-template-columns: 40px 1fr 40px; align-items:center;
  margin-bottom: 12px;
}
.cal-nav{
  height:40px; border-radius: 999px; border:1px solid var(--border);
  background: color-mix(in oklab, var(--surface) 90%, transparent);
  cursor:pointer; transition: background var(--fast) var(--ease), transform var(--fast) var(--ease);
}
.cal-nav:hover{ background: color-mix(in oklab, var(--accent) 10%, var(--surface)); transform: translateY(-1px); }

.calendar-grid{
  display:grid; grid-template-columns: repeat(7, 1fr);
  gap: 8px;
  padding: 12px;
  border-radius: var(--radius-xl);
  border:1px solid var(--border);
  background: color-mix(in oklab, var(--surface) 92%, transparent);
  box-shadow: var(--shadow-1);
  backdrop-filter: var(--blur);
  -webkit-backdrop-filter: var(--blur);
}
.calendar-grid .cell{
  aspect-ratio: 1 / 1;
  border-radius: var(--radius-m);
  display:flex; align-items:center; justify-content:center;
  color: var(--ink-2);
}
.calendar-grid .head{
  font-weight:600; color: var(--muted); aspect-ratio:auto; height:32px;
}
.daycell{
  position:relative;
  background: color-mix(in oklab, var(--surface) 86%, transparent);
  border:1px solid var(--border);
  transition: background var(--fast) var(--ease), transform var(--fast) var(--ease), box-shadow var(--fast) var(--ease);
}
.daycell:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }
.daycell .dhead{
  position:absolute; top:8px; left:10px; font-weight:600;
}
.daycell .dots{
  position:absolute; bottom:8px; left:8px; right:8px; display:flex; gap:6px; flex-wrap:wrap;
}
.daycell .dot{
  width:8px; height:8px; border-radius:999px; background: var(--accent);
  box-shadow: 0 0 10px color-mix(in oklab, var(--accent) 40%, transparent);
}

/* список задач под календарём */
.calendar-tasks{
  margin-top: 12px; padding: 12px;
  display:grid; gap: 10px;
}

/* ===== Utilities ===== */
.row{ display:flex; align-items:center; gap:10px; }
.muted{ color: var(--muted); }
kbd{
  background: color-mix(in oklab, var(--surface) 80%, transparent);
  border:1px solid var(--border); border-bottom-color: color-mix(in oklab, var(--ink) 10%, transparent);
  border-radius: 6px; padding: 2px 6px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 12px;
}

/* ===== Priority helpers (для точек/чипов) ===== */
.prio-low{ --accent: var(--border); }
.prio-medium{ --accent: var(--accent); }     /* базовый акцент */
.prio-high{ --accent: #FF4FA3; }             /* rose */
.prio-critical{ --accent: #8A2BE2; }         /* violet */

/* ===== Small helpers for swipe (визуальные намёки) ===== */
.task[data-swipe="right"]{ background: color-mix(in oklab, #00C853 10%, var(--surface)); }
.task[data-swipe="left"]{ background: color-mix(in oklab, var(--accent) 12%, var(--surface)); }

/* ===== Responsive tweaks ===== */
@media (max-width: 860px){
  .tabs span:not(.icon + span){ display:none; }
  .section{ padding-left: 12px; padding-right: 12px; }
}
