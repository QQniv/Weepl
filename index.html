<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0f1115" media="(prefers-color-scheme: dark)">
  <title>Weepl • Планировщик будущего</title>

  <!-- редирект в /Weepl/ если открыли корень профиля -->
  <script>
    (function(){
      var need = '/Weepl/';
      if (location.hostname.endsWith('github.io') && location.pathname === '/') {
        location.replace(need);
      }
    })();
  </script>
  <!-- динамический base — чтобы ресурсы грузились из текущей папки -->
  <script>
    (function(){
      var basePath = location.pathname.replace(/[^/]*$/, '');
      document.write('<base href="'+ basePath +'">');
    })();
  </script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css?v=2400">
  <script defer src="app.js?v=2400"></script>
</head>
<body>
  <div id="app"></div>

  <!-- ====== LAYOUT ====== -->
  <template id="layout">
    <main id="view" class="section"></main>

    <!-- Floating Action Button — по центру снизу -->
    <button id="fabAdd" class="fab" aria-label="Добавить задачу">+</button>

    <!-- Bottom Navigation -->
    <nav class="bottombar" role="navigation" aria-label="Главная навигация">
      <a class="navbtn active" data-route="#/" href="#/" aria-label="Задачи" title="Задачи">
        <!-- clipboard/checklist icon -->
        <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
          <path fill="currentColor" d="M9 3h6a2 2 0 0 1 2 2h1a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h1a2 2 0 0 1 2-2Zm0 2a1 1 0 0 0-1 1H6v12h12V6h-2a1 1 0 0 0-1-1H9Zm1 6h6v2h-6v-2Zm0 4h6v2h-6v-2Zm-2-4H6v2h2v-2Zm0 4H6v2h2v-2Z"/>
        </svg>
      </a>
      <a class="navbtn" data-route="#/calendar" href="#/calendar" aria-label="Календарь" title="Календарь">
        <!-- calendar icon -->
        <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
          <path fill="currentColor" d="M7 2h2v2h6V2h2v2h2a2 2 0 0 1 2 2v3H3V6a2 2 0 0 1 2-2h2V2Zm14 7v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9h18Zm-11 3H6v3h4v-3Z"/>
        </svg>
      </a>
      <a class="navbtn" data-route="#/settings" href="#/settings" aria-label="Настройки" title="Настройки">
        <!-- gear icon -->
        <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
          <path fill="currentColor" d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm8.94 3.34 1.56.9-1 1.73-1.78-.32a7.97 7.97 0 0 1-1.03 1.79l.57 1.71-1.86 1.08-1.25-1.29a7.9 7.9 0 0 1-2.06.6L13.5 20h-3l-.53-1.46a7.9 7.9 0 0 1-2.06-.6L6.16 19.2 4.3 18.12l.57-1.71a8.05 8.05 0 0 1-1.03-1.79l-1.78.32-1-1.73 1.56-.9a8.2 8.2 0 0 1 0-2.68l-1.56-.9 1-1.73 1.78.32c.28-.64.63-1.24 1.03-1.79L4.3 3.88 6.16 2.8l1.25 1.29c.65-.28 1.34-.48 2.06-.6L10.5 2h3l.53 1.46c.72.12 1.41.32 2.06.6L17.34 2.8 19.2 3.88l-.57 1.71c.4.55.75 1.15 1.03 1.79l1.78-.32 1 1.73-1.56.9c.09.44.12.89.12 1.34s-.03.9-.12 1.34Z"/>
        </svg>
      </a>
    </nav>
  </template>

  <!-- ====== HOME VIEW ====== -->
  <template id="home-view">
    <section class="home">
      <div class="month-bar">
        <button class="month-btn" data-home-month="prev" aria-label="Предыдущий месяц">←</button>
        <h2 id="homeMonth" class="h-impact"></h2>
        <button class="month-btn" data-home-month="next" aria-label="Следующий месяц">→</button>
      </div>
      <div id="dateStrip" class="date-strip"></div>
      <h3 id="todayTitle" class="h-sub"></h3>
      <div id="taskList" class="task-list"></div>
    </section>
  </template>

  <!-- ====== CALENDAR VIEW ====== -->
  <template id="calendar-view">
    <section>
      <div class="calendar-head">
        <button class="month-btn" data-cal="prev" aria-label="Предыдущий месяц">←</button>
        <h2 id="calTitle" class="h-impact"></h2>
        <div class="head-actions">
          <button class="chip" id="btnToday">Сегодня</button>
        </div>
        <button class="month-btn" data-cal="next" aria-label="Следующий месяц">→</button>
      </div>

      <div id="calendarGrid" class="calendar-grid"></div>

      <div class="legend">
        <span><i class="lg lg-low"></i> Низкий</span>
        <span><i class="lg lg-med"></i> Средний</span>
        <span><i class="lg lg-high"></i> Высокий</span>
        <span><i class="lg lg-crit"></i> Критический</span>
      </div>

      <div id="calendarTasks" class="calendar-tasks"></div>
    </section>
  </template>

  <!-- ====== SETTINGS VIEW ====== -->
  <template id="settings-view">
    <section>
      <div class="settings-section">
        <div class="section-title">Внешний вид</div>
        <div class="settings-list">
          <div class="row item">
            <div class="left">
              <div class="label">Тема</div>
              <div class="sub">Светлая или тёмная</div>
            </div>
            <div class="right">
              <select id="setTheme">
                <option value="light">Светлая</option>
                <option value="dark">Тёмная</option>
              </select>
            </div>
          </div>

          <div class="row item">
            <div class="left">
              <div class="label">Акцентный цвет</div>
              <div class="sub">10 современных оттенков</div>
            </div>
            <div class="right">
              <select id="setAccent">
                <option value="blue">Синий</option>
                <option value="rose">Розовый</option>
                <option value="violet">Фиолетовый</option>
                <option value="mint">Мятный</option>
                <option value="lemon">Жёлтый</option>
                <option value="coral">Коралловый</option>
                <option value="azure">Голубой</option>
                <option value="orchid">Орхидея</option>
                <option value="sky">Небесный</option>
                <option value="lime">Лайм</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-section">
        <div class="section-title">Календарь</div>
        <div class="settings-list">
          <div class="row item">
            <div class="left">
              <div class="label">Неделя начинается с</div>
              <div class="sub">Пн / Вс</div>
            </div>
            <div class="right">
              <select id="setWeekStart">
                <option value="1">Понедельника</option>
                <option value="0">Воскресенья</option>
              </select>
            </div>
          </div>

          <div class="row item">
            <div class="left">
              <div class="label">Кнопка «Сегодня»</div>
              <div class="sub">Быстрый прыжок к текущей дате</div>
            </div>
            <div class="right">
              <label class="switch">
                <input type="checkbox" id="setShowToday">
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="row item">
            <div class="left">
              <div class="label">Точки приоритетов</div>
              <div class="sub">Индикаторы в сетке</div>
            </div>
            <div class="right">
              <label class="switch">
                <input type="checkbox" id="setShowDots">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-section">
        <div class="section-title">Данные</div>
        <div class="settings-list">
          <div class="row item">
            <div class="left">
              <div class="label">Экспорт / Импорт</div>
              <div class="sub">JSON-файл с вашими задачами</div>
            </div>
            <div class="right gap">
              <button class="btn" id="btnExport">Экспорт</button>
              <label class="btn-outline">Импорт <input type="file" id="fileImport" hidden/></label>
            </div>
          </div>
        </div>
      </div>
    </section>
  </template>

  <!-- ====== MODAL ====== -->
  <dialog id="taskModal" class="modal">
    <form id="taskForm" method="dialog">
      <div class="modal-body">
        <div class="modal-head">
          <h3 id="modalTitle" class="h-impact">Новая задача</h3>
          <button data-close class="icon-btn" type="button">✖</button>
        </div>

        <div class="field">
          <label>Название</label>
          <input name="title" id="fTitle" required/>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Дата</label>
            <input type="date" name="date" id="fDate"/>
          </div>
          <div class="field">
            <label>Время</label>
            <input type="time" name="time" id="fTime"/>
          </div>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Важность</label>
            <select name="priority" id="fPriority">
              <option value="low">Низкая</option>
              <option value="medium">Средняя</option>
              <option value="high">Высокая</option>
              <option value="critical">Критическая</option>
            </select>
          </div>
          <div class="field">
            <label>SMART</label>
            <input name="smart" id="fSmart" placeholder="Specific/Measurable/..."/>
          </div>
        </div>

        <div class="field">
          <label>Комментарий</label>
          <textarea name="note" id="fNote" rows="2"></textarea>
        </div>

        <div class="modal-foot">
          <button data-close class="btn-outline" type="button">Отмена</button>
          <button type="submit" class="btn">Сохранить</button>
        </div>
      </div>
    </form>
  </dialog>
</body>
</html>
