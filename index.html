<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="color-scheme" content="light dark"/>
  <title>Weepl ‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Anton:wght@400&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css?v=1.7.1"/>

  <meta name="theme-color" content="#ffffff"/>
</head>
<body>

  <!-- ===== TOP BAR (month) ===== -->
  <header class="topbar" role="banner">
    <button id="navPrev" class="icon-btn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">‚Üê</button>
    <h1 id="topTitle" class="title">–û–∫—Ç—è–±—Ä—å 2025 –≥.</h1>
    <button id="navNext" class="icon-btn" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">‚Üí</button>
  </header>

  <!-- ====== VIEW: TODAY (has scroller + timeline + list) ====== -->
  <main id="todayView" class="view active" role="main" aria-label="–°–µ–≥–æ–¥–Ω—è">
    <!-- Horizontal day cards scroller (ONLY here) -->
    <section id="dateScroller" class="date-scroller" aria-label="–î–Ω–∏ –º–µ—Å—è—Ü–∞"></section>

    <!-- 2-–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π –ª–µ–π–∞—É—Ç: —Ç–∞–π–º–ª–∏–Ω–∏—è –∏ –æ–±—â–∏–π —Å–ø–∏—Å–æ–∫ -->
    <section class="today-layout" aria-label="–ü–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å">
      <!-- Timeline: —Å–æ–±—ã—Ç–∏—è —Ä–∞—Å—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
      <div class="timeline-wrap">
        <div class="timeline-head">
          <h2 class="section-title">–í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞</h2>
          <div id="kpiCounter" class="muted"></div>
        </div>
        <div id="timeline" class="timeline" aria-live="polite"></div>
      </div>

      <!-- –û–±—â–∏–π —Å–ø–∏—Å–æ–∫: –∑–∞–¥–∞—á–∏ (—Ñ–∏–∫—Å) + —Å–æ–±—ã—Ç–∏—è (—è—Ä–ª—ã–∫ –≤ —Å–ø–∏—Å–∫–µ) -->
      <div class="list-wrap">
        <div class="list-head">
          <h2 class="section-title">–°–ø–∏—Å–æ–∫</h2>
          <div class="list-legend">
            <span class="dot task"></span><span class="muted">–∑–∞–¥–∞—á–∞</span>
            <span class="dot event"></span><span class="muted">—Å–æ–±—ã—Ç–∏–µ</span>
          </div>
        </div>
        <ul id="taskList" class="task-list" aria-live="polite" aria-describedby="listHint"></ul>
        <p id="listHint" class="muted small">
          –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å. –°–≤–∞–π–ø –≤–ª–µ–≤–æ ‚Äî –ø–µ—Ä–µ–Ω–æ—Å –¥–µ–¥–ª–∞–π–Ω–∞.
        </p>
      </div>
    </section>
  </main>

  <!-- ====== VIEW: CALENDAR (NO scroller here) ====== -->
  <main id="calendarView" class="view" aria-label="–ö–∞–ª–µ–Ω–¥–∞—Ä—å">
    <header class="subbar">
      <button id="calPrev" class="icon-btn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">‚Üê</button>
      <h2 id="calTitle" class="subtitle">–û–∫—Ç—è–±—Ä—å 2025 –≥.</h2>
      <button id="calNext" class="icon-btn" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">‚Üí</button>
    </header>

    <!-- –°–µ—Ç–∫–∞ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ —ç–∫—Ä–∞–Ω; –≤–Ω—É—Ç—Ä–∏ ‚Äî —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∫—Ä–æ–ª–ª, –µ—Å–ª–∏ –Ω–∞–¥–æ -->
    <div class="calendar-wrap">
      <div class="weekdays" aria-hidden="true">
        <span>–ü–Ω</span><span>–í—Ç</span><span>–°—Ä</span><span>–ß—Ç</span><span>–ü—Ç</span><span>–°–±</span><span>–í—Å</span>
      </div>
      <div id="calendarGrid" class="calendar-grid" role="grid" aria-label="–°–µ—Ç–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è"></div>
    </div>
  </main>

  <!-- ====== VIEW: STATS ====== -->
  <main id="statsView" class="view" aria-label="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
    <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <div class="stats-grid">
      <article class="card kpi-ring" aria-label="–ü—Ä–æ—Ü–µ–Ω—Ç –Ω–µ–¥–µ–ª–∏">
        <canvas id="ringPct" width="240" height="240"></canvas>
        <div id="ringPctValue" class="ring-value">0%</div>
        <div class="muted">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é</div>
      </article>

      <article class="card kpi-box">
        <div id="kpi7d" class="kpi-big">0 / 0</div>
        <div class="muted">–ó–∞ 7 –¥–Ω–µ–π</div>
      </article>

      <article class="card kpi-box">
        <div id="kpiMonth" class="kpi-big">0 / 0</div>
        <div class="muted">–ó–∞ –º–µ—Å—è—Ü</div>
      </article>

      <article class="card kpi-box">
        <div id="streak" class="kpi-big">0</div>
        <div class="muted">–°–µ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</div>
      </article>

      <article class="card kpi-chart">
        <header class="card-head">
          <span class="card-title">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ –¥–Ω—è–º</span>
          <span class="muted">–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</span>
        </header>
        <canvas id="bar7d" width="640" height="220"></canvas>
      </article>
    </div>
  </main>

  <!-- ====== VIEW: SETTINGS ====== -->
  <main id="settingsView" class="view" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
    <h2 class="section-title">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</h2>

    <div id="settings" class="settings">
      <section class="settings-group">
        <div class="row">
          <label for="accentColor">–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç</label>
          <input type="color" id="accentColor" value="#5b6cff"/>
        </div>
        <div class="row">
          <label for="neonToggle">–ù–µ–æ–Ω-—ç—Ñ—Ñ–µ–∫—Ç</label>
          <input type="checkbox" id="neonToggle"/>
        </div>
        <div class="row">
          <label for="metalToggle">–ú–µ—Ç–∞–ª–ª–∏—á–Ω–æ—Å—Ç—å</label>
          <input type="checkbox" id="metalToggle"/>
        </div>
        <div class="row">
          <label for="fontScale">–ú–∞—Å—à—Ç–∞–± —Ç–µ–∫—Å—Ç–∞</label>
          <input type="range" id="fontScale" min="0.9" max="1.2" step="0.05" value="1"/>
        </div>
      </section>

      <h3 class="settings-sub">–ü–æ–≤–µ–¥–µ–Ω–∏–µ</h3>
      <section class="settings-group">
        <div class="row">
          <label for="smartOptional">SMART-–ø–æ–ª—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏</label>
          <input type="checkbox" id="smartOptional" checked/>
        </div>
        <div class="row">
          <label for="slotStart">–°—Ç–∞—Ä—Ç –¥–Ω–µ–≤–Ω–æ–π —à–∫–∞–ª—ã</label>
          <input type="time" id="slotStart" value="06:00"/>
        </div>
        <div class="row">
          <label for="slotStep">–®–∞–≥ —Å–ª–æ—Ç–æ–≤ (–º–∏–Ω)</label>
          <input type="number" id="slotStep" min="5" step="5" value="15"/>
        </div>
      </section>
    </div>
  </main>

  <!-- ===== FAB ===== -->
  <button id="fab" class="fab" aria-haspopup="dialog" aria-controls="addDialog" aria-label="–î–æ–±–∞–≤–∏—Ç—å">Ôºã</button>

  <!-- ===== TABBAR ===== -->
  <nav id="tabbar" class="tabbar" role="navigation" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <button class="tab active" data-view="today" aria-label="–°–ø–∏—Å–æ–∫">
      <span class="ico" aria-hidden="true">üóÇÔ∏è</span>
    </button>
    <button class="tab" data-view="calendar" aria-label="–ö–∞–ª–µ–Ω–¥–∞—Ä—å">
      <span class="ico" aria-hidden="true">üìÖ</span>
    </button>
    <button class="tab" data-view="stats" aria-label="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
      <span class="ico" aria-hidden="true">üìä</span>
    </button>
    <button class="tab" data-view="settings" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
      <span class="ico" aria-hidden="true">‚öôÔ∏è</span>
    </button>
  </nav>

  <!-- ===== DIALOG: ADD ITEM (Task/Event) ===== -->
  <dialog id="addDialog" class="dialog">
    <form method="dialog" class="dialog-body" id="addForm">
      <header class="dialog-head">
        <h3 id="addTitle">–ù–æ–≤–æ–µ</h3>
        <menu class="seg">
          <button type="button" class="seg-btn active" data-kind="task">–ó–∞–¥–∞—á–∞</button>
          <button type="button" class="seg-btn" data-kind="event">–°–æ–±—ã—Ç–∏–µ</button>
        </menu>
      </header>

      <div class="fields">
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ
          <input id="fTitle" type="text" required placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?"/>
        </label>

        <div class="row2">
          <label>–î–∞—Ç–∞
            <input id="fDate" type="date" required/>
          </label>
          <label>–í—Ä–µ–º—è
            <input id="fTime" type="time"/>
          </label>
        </div>

        <!-- –¢–æ–ª—å–∫–æ –¥–ª—è —Å–æ–±—ã—Ç–∏—è -->
        <div id="eventBlock" class="event-only hidden">
          <div class="row2">
            <label>–ù–∞—á–∞–ª–æ
              <input id="fStart" type="time" value="06:00"/>
            </label>
            <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)
              <input id="fDur" type="number" min="5" step="5" value="60"/>
            </label>
          </div>
        </div>

        <div class="row2">
          <label>–í–∞–∂–Ω–æ—Å—Ç—å
            <select id="fPriority">
              <option value="low">–Ω–∏–∑–∫–∞—è</option>
              <option value="medium" selected>—Å—Ä–µ–¥–Ω—è—è</option>
              <option value="high">–≤—ã—Å–æ–∫–∞—è</option>
            </select>
          </label>
          <label>–¢–µ–≥
            <input id="fTag" type="text" placeholder="#—É—á—ë–±–∞ #—Å–ø–æ—Ä—Ç"/>
          </label>
        </div>

        <!-- SMART (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
        <details id="smartWrap" class="smart">
          <summary>SMART-–ø–æ–ª—è</summary>
          <label>S ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞
            <input id="fS" type="text" placeholder="–ß—Ç–æ —Ç–æ—á–Ω–æ —Å–¥–µ–ª–∞—Ç—å?"/>
          </label>
          <label>M ‚Äî –º–µ—Ç—Ä–∏–∫–∞
            <input id="fM" type="text" placeholder="–ö–∞–∫ –ø–æ–π–º—É, —á—Ç–æ –≥–æ—Ç–æ–≤–æ?"/>
          </label>
          <label>A ‚Äî –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç—å
            <input id="fA" type="text" placeholder="–†–µ—Å—É—Ä—Å—ã/—à–∞–≥–∏"/>
          </label>
          <label>R ‚Äî —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
            <input id="fR" type="text" placeholder="–ó–∞—á–µ–º —ç—Ç–æ –º–Ω–µ?"/>
          </label>
          <label>T ‚Äî —Å—Ä–æ–∫
            <input id="fT" type="datetime-local"/>
          </label>
        </details>

        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
          <textarea id="fNote" rows="3" placeholder="–î–æ–ø. –¥–µ—Ç–∞–ª–∏‚Ä¶"></textarea>
        </label>
      </div>

      <footer class="dialog-foot">
        <button value="cancel" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
        <button id="addSave" value="default" class="btn primary">–î–æ–±–∞–≤–∏—Ç—å</button>
      </footer>
    </form>
  </dialog>

  <!-- ===== BOTTOM SHEET: RESCHEDULE ===== -->
  <div id="rescheduleSheet" class="sheet" aria-hidden="true" role="dialog" aria-label="–ü–µ—Ä–µ–Ω–æ—Å –¥–µ–¥–ª–∞–π–Ω–∞">
    <div class="sheet-card">
      <header class="sheet-head">
        <h3>–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏</h3>
        <button id="sheetClose" class="icon-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </header>
      <div class="sheet-actions">
        <button class="chip" data-shift="15">+15 –º–∏–Ω</button>
        <button class="chip" data-shift="30">+30 –º–∏–Ω</button>
        <button class="chip" data-shift="60">+1 —á–∞—Å</button>
        <button class="chip" data-shift="1440">+1 –¥–µ–Ω—å</button>
        <div class="row2">
          <input id="customShift" type="number" min="1" step="1" placeholder="–ú–∏–Ω—É—Ç—ã"/>
          <button id="applyCustom" class="btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
      </div>
      <footer class="sheet-foot">
        <button id="sheetCancel" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
      </footer>
    </div>
    <div class="sheet-backdrop"></div>
  </div>

  <!-- App script -->
  <script defer src="app.js?v=1.7.1"></script>
</body>
</html>
